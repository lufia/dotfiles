#!/usr/bin/env bash
# usage: repo [-r remote] [path]

set -eu

if [[ $# = 0 ]]
then
	set .
fi

cwd=$(pwd)
for i in "$@"
do
	p=$(git -C "$i" remote get-url origin)
	url="$(dirname $p)/$(basename $p .git)"
	if [[ $url =~ ^https://.*$ ]]
	then
		open $url/pull/$(git -C "$i" symbolic-ref --short HEAD)
	fi
done
